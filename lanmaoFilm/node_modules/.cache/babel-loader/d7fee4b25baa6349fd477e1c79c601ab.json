{"remainingRequest":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Vue\\vuepro\\miaomiao\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue\\vuepro\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\vuepro\\miaomiao\\src\\views\\Mine\\center.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue\\vuepro\\miaomiao\\src\\views\\Mine\\center.vue","mtime":1584685475031},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IG1lc3NhZ2VCb3ggfSBmcm9tICdAL2NvbXBvbmVudHMvSlMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2NlbnRlcicsCiAgbWV0aG9kczogewogICAgaGFuZGxlVG9Mb2dvdXQ6IGZ1bmN0aW9uIGhhbmRsZVRvTG9nb3V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5heGlvcy5nZXQoJy9hcGkyL3VzZXJzL2xvZ291dCcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgdmFyIHN0YXR1cyA9IHJlcy5kYXRhLnN0YXR1czsKCiAgICAgICAgaWYgKHN0YXR1cyA9PT0gMCkgewogICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ25hbWUnKTsKICAgICAgICAgIC8vIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpc0FkbWluJyk7CiAgICAgICAgICAvLyB0aGlzLiRzdG9yZS5jb21taXQoJ3VzZXIvVVNFUl9OQU1FJywgeyBuYW1lIDogJycsIGlzQWRtaW4gOiBmYWxzZSAsIHVzZXJIZWFkIDogJyd9KTsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgnL21pbmUvbG9naW4nKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVUb1VwbG9hZDogZnVuY3Rpb24gaGFuZGxlVG9VcGxvYWQoZXYpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgZmlsZSA9IGV2LnRhcmdldC5maWxlc1swXTsKICAgICAgdmFyIHBhcmFtID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIHBhcmFtLmFwcGVuZCgnZmlsZScsIGZpbGUsIGZpbGUubmFtZSk7CiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5heGlvcy5wb3N0KCcvYXBpMi91c2Vycy91cGxvYWRVc2VySGVhZCcsIHBhcmFtLCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBzdGF0dXMgPSByZXMuZGF0YS5zdGF0dXM7CiAgICAgICAgdmFyIFRoaXMgPSBfdGhpczI7CgogICAgICAgIGlmIChzdGF0dXMgPT09IDApIHsKICAgICAgICAgIG1lc3NhZ2VCb3goewogICAgICAgICAgICB0aXRsZTogJ+S/oeaBrycsCiAgICAgICAgICAgIGNvbnRlbnQ6ICfkuIrkvKDlpLTlg4/miJDlip8nLAogICAgICAgICAgICBvazogJ+ehruWumicsCiAgICAgICAgICAgIGhhbmxkZU9rOiBmdW5jdGlvbiBoYW5sZGVPaygpIHsKICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VzZXIvVVNFUl9OQU1FJywgewogICAgICAgICAgICAgICAgbmFtZTogVGhpcy4kc3RvcmUuc3RhdGUudXNlci5uYW1lLAogICAgICAgICAgICAgICAgaXNBZG1pbjogVGhpcy4kc3RvcmUuc3RhdGUudXNlci5pc0FkbWluLAogICAgICAgICAgICAgICAgdXNlckhlYWQ6IHJlcy5kYXRhLmRhdGEudXNlckhlYWQgKyAnPycgKyBNYXRoLnJhbmRvbSgpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7fQogICAgICB9KTsKICAgIH0KICB9LAogIGJlZm9yZVJvdXRlRW50ZXI6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIC8vIHZtID0+IHsKICAgIC8vICAgICB2bS4kc3RvcmUuY29tbWl0KCd1c2VyL1VTRVJfTkFNRScseyAKICAgIC8vICAgICAgICAgICAgICAgICBuYW1lIDogJ2EnICwgCiAgICAvLyAgICAgICAgICAgICAgICAgaXNBZG1pbiA6IHR1cmUsCiAgICAvLyAgICAgICAgICAgICAgICAgdXNlckhlYWQgOiAnJwogICAgLy8gICAgICAgICAgICAgfSk7CiAgICAvLyAgICAgfQogICAgYXhpb3MuZ2V0KCcvYXBpMi91c2Vycy9nZXRVc2VyJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHZhciBzdGF0dXMgPSByZXMuZGF0YS5zdGF0dXM7CgogICAgICBpZiAoc3RhdHVzID09PSAwKSB7CiAgICAgICAgbmV4dChmdW5jdGlvbiAodm0pIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCduYW1lJywgcmVzLmRhdGEuZGF0YS51c2VybmFtZSk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNBZG1pbicsIHJlcy5kYXRhLmRhdGEuaXNBZG1pbik7CiAgICAgICAgICB2bS4kc3RvcmUuY29tbWl0KCd1c2VyL1VTRVJfTkFNRScsIHsKICAgICAgICAgICAgbmFtZTogcmVzLmRhdGEuZGF0YS51c2VybmFtZSwKICAgICAgICAgICAgaXNBZG1pbjogcmVzLmRhdGEuZGF0YS5pc0FkbWluLAogICAgICAgICAgICB1c2VySGVhZDogcmVzLmRhdGEuZGF0YS51c2VySGVhZAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCgnL21pbmUvbG9naW4nKTsKICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICBjb25zb2xlLmxvZygnZXJyPicsIGVycik7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["center.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <div>个人中心：</div>\r\n        <div class=\"userdiv\">当前用户：{{ $store.state.user.name }} <div class=\"logout\" @touchstart=\"handleToLogout\">退出</div></div>\r\n       <!-- <div v-if=\"$store.state.user.isAdmin\">用户身份：管理员 <a href=\"/admin\" target=\"_blank\">进入管理后台</a></div>\r\n        <div v-else>用户身份：普通会员</div> -->\r\n        <!-- <div>\r\n            <input type=\"file\" name=\"file\" value=\"上传头像\">\r\n            <img class=\"userHead\" :src=\"$store.state.user.userHead\" alt=\"\">\r\n        </div> -->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { messageBox } from '@/components/JS';\r\nexport default {\r\n    name : 'center',\r\n    methods : {\r\n        handleToLogout(){\r\n            this.axios.get('/api2/users/logout').then((res)=>{\r\n            console.log(res);\r\n                 var status = res.data.status;\r\n                if(status === 0){\r\n                    // localStorage.removeItem('name');\r\n                    // localStorage.removeItem('isAdmin');\r\n                    // this.$store.commit('user/USER_NAME', { name : '', isAdmin : false , userHead : ''});\r\n                    this.$router.push('/mine/login');\r\n                    \r\n                }\r\n            }).catch((err)=>{\r\n                console.log(err)\r\n            })\r\n        },\r\n        handleToUpload(ev){\r\n            var file = ev.target.files[0];\r\n            var param = new FormData();\r\n            param.append('file', file , file.name);\r\n            var config = {\r\n                headers : {\r\n                    'Content-Type' : 'multipart/form-data'\r\n                }\r\n            }\r\n            this.axios.post('/api2/users/uploadUserHead', param , config).then((res)=>{\r\n                var status = res.data.status;\r\n                var This = this;\r\n                if( status === 0){\r\n                    messageBox({\r\n                        title : '信息',\r\n                        content : '上传头像成功',\r\n                        ok : '确定',\r\n                        hanldeOk(){\r\n                            this.$store.commit('user/USER_NAME',{\r\n                                name : This.$store.state.user.name , \r\n                                isAdmin : This.$store.state.user.isAdmin,\r\n                                userHead : res.data.data.userHead + '?' + Math.random()\r\n                            });\r\n\r\n                        }\r\n\r\n                    })\r\n\r\n                }\r\n                else{\r\n\r\n                }\r\n            });\r\n        }    \r\n    },\r\n    beforeRouteEnter (to, from, next) {\r\n            // vm => {\r\n            //     vm.$store.commit('user/USER_NAME',{ \r\n            //                 name : 'a' , \r\n            //                 isAdmin : ture,\r\n            //                 userHead : ''\r\n            //             });\r\n            //     }\r\n\r\n            axios.get('/api2/users/getUser').then((res)=>{\r\n                var status = res.data.status;\r\n                if(status === 0){                   \r\n                    next(\r\n                        vm => {\r\n                            localStorage.setItem('name',res.data.data.username);\r\n                            localStorage.setItem('isAdmin',res.data.data.isAdmin);\r\n                            vm.$store.commit('user/USER_NAME',{ \r\n                                name : res.data.data.username , \r\n                                isAdmin : res.data.data.isAdmin,\r\n                                userHead : res.data.data.userHead\r\n                            });\r\n                        }\r\n                    );\r\n                }\r\n                else{\r\n                    next('/mine/login');\r\n                }\r\n            }).catch((err)=>{\r\n                console.log('err>',err);\r\n            \r\n            })\r\n        }\r\n\r\n   \r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.userHead{ width:100px; height: 100px; border-radius: 50%; overflow: hidden;}\r\n.userdiv{display: flex;}\r\n.logout{ margin-left: 20px; color: blue}\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/Mine"}]}