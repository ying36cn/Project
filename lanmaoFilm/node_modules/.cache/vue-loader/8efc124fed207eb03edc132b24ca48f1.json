{"remainingRequest":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\vuepro\\miaomiao\\src\\views\\Admin\\users.vue?vue&type=style&index=0&id=17acda04&scoped=true&lang=css&","dependencies":[{"path":"D:\\Vue\\vuepro\\miaomiao\\src\\views\\Admin\\users.vue","mtime":1578299876236},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5wYWdleyBtYXJnaW4tdG9wOjIwcHg7fQ0K"},{"version":3,"sources":["users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2KA","file":"users.vue","sourceRoot":"src/views/Admin","sourcesContent":["<template>\r\n    <div>\r\n        <el-table :data=\"nowTableData\"  border  style=\"width: 100%\">\r\n            <el-table-column prop=\"userHead\" label=\"用户头像\">\r\n                <template slot-scope=\"scope\">\r\n                    <img :src=\"scope.row.userHead\" alt=\"\">\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"date\" label=\"注册日期\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"username\" label=\"用户姓名\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"email\" label=\"用户邮箱\">\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\">\r\n                <template  slot-scope=\"scope\">\r\n                    <el-button size=\"small\" @click=\"handleToFreeze(scope.$index, scope.row)\">{{ scope.row.isFreeze ? '已冻结' : '未冻结' }}</el-button>\r\n                    <el-button size=\"small\" @click=\"handleToDelete(scope.$index, scope.row)\" type=\"danger\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination class=\"page\" background  layout=\"prev, pager, next\" :current-page.sync=\"currentPage\" :page-size=\"pageSize\"  :total=\"tableData.length\">\r\n        </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name :'users',\r\n    data(){\r\n        return {\r\n            tableData : [],\r\n            currentPage : 2,\r\n            pageSize : 2\r\n\r\n        }\r\n    },\r\n    mounted(){\r\n        this.tableData = [\r\n                     {\r\n                        _id : \"5c9879798797\",\r\n                        date : \"2019-03-21T07:08:45,789Z\",\r\n                        username: \"aa\",\r\n                        password: \"345\",\r\n                        isAdmin: false,\r\n                        isFreeze : false,\r\n                        _v : \"0\",\r\n                        email :　\"123@qq.com\",\r\n                        userHead : 'localhost:3000/uploads/potter.ico'\r\n                    },\r\n                    {\r\n                        _id : \"5c9879798798\",\r\n                        date : \"2019-03-21T07:08:45,789Z\",\r\n                        username: \"a3\",\r\n                        password: \"345\",\r\n                        isAdmin: true,\r\n                        isFreeze : false,\r\n                        _v : \"0\",\r\n                        email :　\"123@qq.com\"\r\n                    },\r\n                    {\r\n                        _id : \"5c9879798799\",\r\n                        date : \"2019-03-21T07:08:45,789Z\",\r\n                        username: \"a\",\r\n                        password: \"345\",\r\n                        isAdmin: false,\r\n                        isFreeze : true,\r\n                        _v : \"0\",\r\n                        email :　\"123@qq.com\"\r\n                    },\r\n                    {\r\n                        _id : \"5c9879798800\",\r\n                        date : \"2019-03-21T07:08:45,789Z\",\r\n                        username: \"a25\",\r\n                        password: \"345\",\r\n                        isAdmin: false,\r\n                        isFreeze : false,\r\n                        _v : \"0\",\r\n                        email :　\"123@qq.com\"\r\n                    }\r\n                 ]\r\n        // this.axios.get('/api2/admin/userList').then((res)=>{\r\n        //     console.log(res);\r\n        //     var status = res.data.status;\r\n        //     if(status === 0){\r\n        //         this.tableData = res.data.data.usersList;\r\n\r\n        //     }else{\r\n        //          this.tableData = [\r\n        //              {\r\n        //                 _id : \"5c9879798797\",\r\n        //                 date : \"2019-03-21T07:08:45,789Z\",\r\n        //                 username: \"aa\",\r\n        //                 password: \"345\",\r\n        //                 isAdmin: false,\r\n        //                 isFreeze : false,\r\n        //                 _v : \"0\",\r\n        //                 email :　\"123@qq.com\"\r\n        //             },\r\n        //             {\r\n        //                 _id : \"5c9879798798\",\r\n        //                 date : \"2019-03-21T07:08:45,789Z\",\r\n        //                 username: \"a\",\r\n        //                 password: \"345\",\r\n        //                 isAdmin: true,\r\n        //                 isFreeze : false,\r\n        //                 _v : \"0\",\r\n        //                 email :　\"123@qq.com\"\r\n        //             }\r\n        //          ]\r\n        //     }\r\n        // }).catch((err)=>{\r\n        //     console.log(err);\r\n        // })\r\n    },\r\n    computed : {\r\n        nowTableData(){\r\n            return this.tableData.slice( (this.currentPage - 1) * this.pageSize,this.currentPage*this.pageSize) || [];\r\n        }\r\n    },\r\n    methods : {\r\n         handleToFreeze(index,row){\r\n            // console.log( index, row);\r\n            this.axios.post('/api2/admin/updateFreeze',{\r\n                email : row.email,\r\n                isFreeze : !row.isFreeze\r\n            }).then((res)=>{\r\n                var status = res.data.status;\r\n                if(status === 0){\r\n                    this.$alert('冻结操作已成功', '信息', {\r\n                        confirmButtonText: '确定',\r\n                        callback: action => { \r\n                            this.tableData[index].isFreeze = !row.isFreeze;                          \r\n                        }\r\n                    });\r\n\r\n                }\r\n                else{\r\n                    this.$alert('冻结操作失败', '信息', {\r\n                        confirmButtonText: '确定'  \r\n                    });\r\n\r\n                }\r\n            });\r\n         },\r\n         handleToDelete(index,row){\r\n             this.axios.post('api2/admin/deleteUser',{\r\n                email : row.email                 \r\n             }).then((res)=>{\r\n                 var status = res.data.status;\r\n                 if(status === 0){\r\n                    this.$alert('删除操作已成功','信息',{\r\n                        confirmButtonText : '确定',\r\n                        callback : action =>{\r\n                        this.tableData.splice(index,1);\r\n                        }\r\n                    });\r\n                 }\r\n                 else{\r\n                     this.$alert('删除操作失败','信息',{\r\n                         confirmButtonText : '确定'\r\n                     })\r\n                 }\r\n\r\n             })\r\n         }\r\n    }  \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page{ margin-top:20px;}\r\n</style>\r\n"]}]}