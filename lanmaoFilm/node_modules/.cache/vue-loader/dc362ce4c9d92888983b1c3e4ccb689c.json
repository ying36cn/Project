{"remainingRequest":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\vuepro\\miaomiao\\src\\components\\NowPlaying\\index.vue?vue&type=style&index=0&id=5211f1aa&scoped=true&lang=css&","dependencies":[{"path":"D:\\Vue\\vuepro\\miaomiao\\src\\components\\NowPlaying\\index.vue","mtime":1577862385969},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLyogTm93UGxheWluZyovDQogICAgI2NvbnRlbnQgLm1vdmllX2JvZHl7bWFyZ2luLWJvdHRvbTogNTBweDsgZmxleDoxOyBvdmVyZmxvdzogYXV0bzt9DQogICAgLm1vdmllX2JvZHkgdWx7IG1hcmdpbjogMCAxMnB4OyBvdmVyZmxvdzogaGlkZGVuO30NCiAgICAubW92aWVfYm9keSB1bCBsaXttYXJnaW4tdG9wOjEycHg7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJvcmRlci1ib3R0b206IDFweCAjZTZlNmU2IHNvbGlkOyBwYWRkaW5nLWJvdHRvbTogMTBweDt9DQogICAgLm1vdmllX2JvZHkgLnBpY19zaG93eyB3aWR0aDo2NHB4OyBoZWlnaHQ6IDkwcHg7fQ0KICAgIC5tb3ZpZV9ib2R5IC5waWNfc2hvdyBpbWd7IHdpZHRoOjEwMCU7fQ0KICAgIC5tb3ZpZV9ib2R5IC5pbmZvX2xpc3QgeyBtYXJnaW4tbGVmdDogMTBweDtmbGV4OjE7cG9zaXRpb246IHJlbGF0aXZlO30NCiAgICAubW92aWVfYm9keSAuaW5mb19saXN0IGgyeyBmb250LXNpemU6IDE3cHg7IGxpbmUtaGVpZ2h0OiAyNHB4OyB3aWR0aDoxNTBweDtvdmVyZmxvdzogaGlkZGVuO3doaXRlLXNwYWNlOiBub3dyYXA7dGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7fQ0KICAgIC5tb3ZpZV9ib2R5IC5pbmZvX2xpc3QgcHsgZm9udC1zaXplOjEzcHg7bGluZS1oZWlnaHQ6IDIycHg7d2lkdGg6MjAwcHg7b3ZlcmZsb3c6IGhpZGRlbjsgd2hpdGUtc3BhY2U6IG5vd3JhcDt0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczt9DQogICAgLm1vdmllX2JvZHkgLmluZm9fbGlzdCAuZ3JhZGV7IGZvbnQtd2VpZ2h0OiA3MDA7IGNvbG9yOiAjZmFhZjAwO2ZvbnQtc2l6ZTogMTVweH0NCiAgICAubW92aWVfYm9keSAuaW5mb19saXN0IGltZ3sgd2lkdGg6IDIwcHg7IHBvc2l0aW9uOiBhYnNvbHV0ZTtyaWdodDogMTBweDsgdG9wOiAxcHg7fQ0KICAgIC5tb3ZpZV9ib2R5IC5idG5fbWFsbCAsIC5tb3ZpZV9ib2R5IC5icm5fcHJleyB3aWR0aDo0N3B4OyBoZWlnaHQ6IDI3cHg7IGxpbmUtaGVpZ2h0OiAyOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjogI2U1NDg0Nztjb2xvcjogI2ZmZjsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDEycHg7IGN1cnNvcjogcG9pbnRlcjt9DQogICAgLm1vdmllX2JvZHkgLmJybl9wcmV7IGJhY2tncm91bmQtY29sb3I6ICMzYzlmZTY7fQ0KICAgIC5tb3ZpZV9ib2R5IC5wdWxsRG93bnsgbWFyZ2luOjA7IHBhZGRpbmc6MDsgYm9yZGVyOm5vbmU7fQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/NowPlaying","sourcesContent":["<template>\r\n  <div class=\"movie_body\" >\r\n    <Loading v-if=\"isLoading\"></Loading> \r\n        <Scroller v-else :handleToScroll =\"handleToScroll\" :handleToTouchEnd=\"handleToTouchEnd\">\r\n        <p  v-if=\"movieList == ''\">{{ noData }}</p>\r\n        <ul>\r\n            <!-- <li>\r\n                <div class=\"pic_show\"><img src=\"/image/movie_2.jpg\" alt=\"\"></div>\r\n                <div class=\"info_list\">\r\n                    <h2>标题</h2>\r\n                    <p>观众评<span class=\"grade\"></span></p>\r\n                    <p>主演：</p>\r\n                    <p>今天55家影院放映60场</p>                       \r\n                </div>\r\n                <div class=\"btn_mall\">购票</div>\r\n                \r\n            </li> -->\r\n            <li class=\"pullDown\">{{ pullDownMsg }}</li>\r\n            <li v-for=\"item in movieList\" :key=\"item.id\">\r\n                <div class=\"pic_show\" @tap=\"handleToDetail\"><img :src=\"item.img | setWH('128.180')\" alt=\"\"></div>\r\n                <div class=\"info_list\">\r\n                    <h2>{{ item.nm }} <img v-if=\"item.version\" src=\"@/assets/view_3d.png\" alt=\"\"/></h2>\r\n                    <p>观众评<span class=\"grade\">{{ item.sc }}</span></p>\r\n                    <p>主演：{{ item.star }}</p>\r\n                    <p>{{ item.showInfo}}</p>                       \r\n                </div>\r\n                <div class=\"btn_mall\">购票</div>                \r\n            </li>\r\n        </ul> \r\n    </Scroller>\r\n    \r\n   </div>\r\n    \r\n</template>\r\n\r\n<script>\r\n// import BScroll from 'better-scroll'\r\nimport { setTimeout } from 'timers';\r\n\r\nexport default {\r\n    name : 'NowPlaying',      \r\n    data(){\r\n        return {\r\n            movieList : [],\r\n            noData : '',\r\n            pullDownMsg : '',\r\n            isLoading　: true,\r\n            prevCityId : -1\r\n        }\r\n    },\r\n    activated(){\r\n        var cityId = this.$store.state.city.id;\r\n        if ( this.prevCityId === cityId ){ return; }\r\n       // this.isLoading = true;    \r\n        this.axios.get('/api/movieOnInfoList?cityId='+cityId).then((res)=>{\r\n            var msg = res.data.msg;\r\n            if( msg === 'ok' ){\r\n                if(res.data.data.movieList){\r\n                    this.movieList = res.data.data.movieList;\r\n                    this.isLoading = false;\r\n                    this.prevCityId = cityId;\r\n                    // this.$nextTick(()=>{\r\n                    //     var scroll = new BScroll( this.$refs.movie_body , {\r\n                    //         tap : true,\r\n                    //         probeType: 1\r\n                    //     });\r\n                    //     scroll.on('scroll',(pos)=>{\r\n                    //         //console.log('scroll');\r\n                    //         //下拉加载\r\n                    //         if( pos.y > 30){\r\n                    //             this.pullDownMsg = '更新中...';\r\n                    //         }                            \r\n                    //     });\r\n                    //     scroll.on('touchEnd',(pos)=>{\r\n                    //        // console.log('touchEnd');\r\n                    //         if( pos.y > 30 ){\r\n                    //             this.axios.get('/api/movieOnInfoList?cityId=10').then((res)=>{\r\n                    //                  var msg = res.data.msg;\r\n                    //                 if( msg === 'ok' ){\r\n                    //                     this.pullDownMsg = '更新成功';\r\n                    //                     if(res.data.data.movieList){\r\n                    //                         setTimeout(()=>{\r\n                    //                              this.movieList = res.data.data.movieList;\r\n                    //                              this.pullDownMsg = '';\r\n\r\n                    //                         },1000)\r\n                                           \r\n                    //                     }\r\n                    //                 }\r\n\r\n                    //             });\r\n                        \r\n                    //         }\r\n                    //     })\r\n                    //  });\r\n                }else{\r\n                    this.noData = '暂无数据';\r\n                    this.isLoading = false;\r\n                    this.movieList = [\r\n                        {\r\n                            id:341139,\r\n                            haspromotionTag : false,\r\n                            img : 'http://p0.meituan.net/w.h/movie/a3d6ca3bdd5b0ddd7016acff9a9f2f2e2805813.jpg',\r\n                            version : '',\r\n                            nm : '叶问4：完结篇',\r\n                            preShow : false,\r\n                            sc : 0,\r\n                            globalReleased : false,\r\n                            wish: 426078,\r\n                            star : '甄子丹，吴樾，吴建豪,',\r\n                            rt : '2019-12-20',\r\n                            showInfo : '中国大陆 / 107分钟',\r\n                            showst : 4,\r\n                            wishst : 0\r\n                        },\r\n                        {\r\n                            id:1206605,\r\n                            haspromotionTag : false,\r\n                            img : 'http://p1.meituan.net/w.h/movie/9064b787a533d85fa2d2f8ad486351861051512.jpg',\r\n                            version : '',\r\n                            nm : '半个喜剧',\r\n                            preShow : false,\r\n                            sc : 9.6,\r\n                            globalReleased : false,\r\n                            wish: 40834,\r\n                            star : '任素汐，吴昱翰，刘迅',\r\n                            rt : '2019-03-08',\r\n                            showInfo : '中国大陆 / 111分钟',\r\n                            showst : 4,\r\n                            wishst : 0\r\n                        },\r\n                        {\r\n                            id:1206606,\r\n                            haspromotionTag : false,\r\n                            img : 'http://p1.meituan.net/w.h/movie/e6a78a25fcc66f8bd6ac58c66ce305151928945.jpg',\r\n                            version : '3D',\r\n                            nm : '星球大战：天行者崛起',\r\n                            preShow : false,\r\n                            sc : 9.6,\r\n                            globalReleased : false,\r\n                            wish: 40834,\r\n                            star : '维果.莫腾森，马克·哈米尔，亚当·德赖弗',\r\n                            rt : '2019-12-20',\r\n                            showInfo : '美国 / 142分钟',\r\n                            showst : 4,\r\n                            wishst : 0\r\n                        },\r\n                        {\r\n                            id:1206607,\r\n                            haspromotionTag : false,\r\n                            img : 'http://p1.meituan.net/w.h/movie/c9b280de01549fcb71913edec05880585769972.jpg',\r\n                            version : '3D',\r\n                            nm : '冰雪奇缘2',\r\n                            preShow : false,\r\n                            sc : 9.6,\r\n                            globalReleased : false,\r\n                            wish: 40834,\r\n                            star : '克里斯汀·贝尔，乔什·加德，伊迪娜·门泽尔',\r\n                            rt : '2019-03-08',\r\n                            showInfo : '美国 / 104分钟',\r\n                            showst : 4,\r\n                            wishst : 0\r\n                        },\r\n                        {\r\n                            id:1206608,\r\n                            haspromotionTag : false,\r\n                            img : 'http://p1.meituan.net/w.h/movie/e6a78a25fcc66f8bd6ac58c66ce305151928945.jpg',\r\n                            version : '3D',\r\n                            nm : '星球大战：天行者崛起',\r\n                            preShow : false,\r\n                            sc : 9.6,\r\n                            globalReleased : false,\r\n                            wish: 40834,\r\n                            star : '维果.莫腾森，马克·哈米尔，亚当·德赖弗',\r\n                            rt : '2019-12-20',\r\n                            showInfo : '美国 / 142分钟',\r\n                            showst : 4,\r\n                            wishst : 0\r\n                        },\r\n\r\n                        ]\r\n\r\n                }\r\n               \r\n                \r\n            }\r\n        })\r\n    },\r\n    methods:{\r\n        handleToDetail(){\r\n            console.log(1);\r\n        },\r\n        handleToScroll(pos){\r\n            if( pos.y > 30){\r\n                this.pullDownMsg = '更新中...';\r\n            } \r\n        },\r\n        handleToTouchEnd(pos){\r\n            if( pos.y > 30){\r\n                    this.axios.get('/api/movieOnInfoList?cityId=10').then((res)=>{\r\n                            var msg = res.data.msg;\r\n                        if( msg === 'ok' ){\r\n                            this.pullDownMsg = '更新成功';\r\n                            if(res.data.data.movieList){\r\n                                setTimeout(()=>{\r\n                                        this.movieList = res.data.data.movieList;\r\n                                        this.pullDownMsg = '';\r\n\r\n                                },1000)\r\n                                \r\n                            }\r\n                        }\r\n\r\n                    });\r\n            } \r\n        }\r\n\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>/* NowPlaying*/\r\n    #content .movie_body{margin-bottom: 50px; flex:1; overflow: auto;}\r\n    .movie_body ul{ margin: 0 12px; overflow: hidden;}\r\n    .movie_body ul li{margin-top:12px; display: flex; align-items: center; border-bottom: 1px #e6e6e6 solid; padding-bottom: 10px;}\r\n    .movie_body .pic_show{ width:64px; height: 90px;}\r\n    .movie_body .pic_show img{ width:100%;}\r\n    .movie_body .info_list { margin-left: 10px;flex:1;position: relative;}\r\n    .movie_body .info_list h2{ font-size: 17px; line-height: 24px; width:150px;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;}\r\n    .movie_body .info_list p{ font-size:13px;line-height: 22px;width:200px;overflow: hidden; white-space: nowrap;text-overflow: ellipsis;}\r\n    .movie_body .info_list .grade{ font-weight: 700; color: #faaf00;font-size: 15px}\r\n    .movie_body .info_list img{ width: 20px; position: absolute;right: 10px; top: 1px;}\r\n    .movie_body .btn_mall , .movie_body .brn_pre{ width:47px; height: 27px; line-height: 28px; text-align: center;background-color: #e54847;color: #fff; border-radius: 4px; font-size: 12px; cursor: pointer;}\r\n    .movie_body .brn_pre{ background-color: #3c9fe6;}\r\n    .movie_body .pullDown{ margin:0; padding:0; border:none;}\r\n</style>\r\n"]}]}