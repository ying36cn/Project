{"remainingRequest":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\vuepro\\miaomiao\\src\\views\\Admin\\users.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue\\vuepro\\miaomiao\\src\\views\\Admin\\users.vue","mtime":1578299876236},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZSA6J3VzZXJzJywNCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICB0YWJsZURhdGEgOiBbXSwNCiAgICAgICAgICAgIGN1cnJlbnRQYWdlIDogMiwNCiAgICAgICAgICAgIHBhZ2VTaXplIDogMg0KDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1vdW50ZWQoKXsNCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbDQogICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBfaWQgOiAiNWM5ODc5Nzk4Nzk3IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgOiAiMjAxOS0wMy0yMVQwNzowODo0NSw3ODlaIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICIzNDUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgaXNBZG1pbjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICBpc0ZyZWV6ZSA6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgX3YgOiAiMCIsDQogICAgICAgICAgICAgICAgICAgICAgICBlbWFpbCA644CAIjEyM0BxcS5jb20iLA0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlckhlYWQgOiAnbG9jYWxob3N0OjMwMDAvdXBsb2Fkcy9wb3R0ZXIuaWNvJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBfaWQgOiAiNWM5ODc5Nzk4Nzk4IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgOiAiMjAxOS0wMy0yMVQwNzowODo0NSw3ODlaIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYTMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICIzNDUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgaXNBZG1pbjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzRnJlZXplIDogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICBfdiA6ICIwIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsIDrjgIAiMTIzQHFxLmNvbSINCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgX2lkIDogIjVjOTg3OTc5ODc5OSIsDQogICAgICAgICAgICAgICAgICAgICAgICBkYXRlIDogIjIwMTktMDMtMjFUMDc6MDg6NDUsNzg5WiIsDQogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICIzNDUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgaXNBZG1pbjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICBpc0ZyZWV6ZSA6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICBfdiA6ICIwIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsIDrjgIAiMTIzQHFxLmNvbSINCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgX2lkIDogIjVjOTg3OTc5ODgwMCIsDQogICAgICAgICAgICAgICAgICAgICAgICBkYXRlIDogIjIwMTktMDMtMjFUMDc6MDg6NDUsNzg5WiIsDQogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImEyNSIsDQogICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogIjM0NSIsDQogICAgICAgICAgICAgICAgICAgICAgICBpc0FkbWluOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzRnJlZXplIDogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICBfdiA6ICIwIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsIDrjgIAiMTIzQHFxLmNvbSINCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICBdDQogICAgICAgIC8vIHRoaXMuYXhpb3MuZ2V0KCcvYXBpMi9hZG1pbi91c2VyTGlzdCcpLnRoZW4oKHJlcyk9PnsNCiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIC8vICAgICB2YXIgc3RhdHVzID0gcmVzLmRhdGEuc3RhdHVzOw0KICAgICAgICAvLyAgICAgaWYoc3RhdHVzID09PSAwKXsNCiAgICAgICAgLy8gICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGEudXNlcnNMaXN0Ow0KDQogICAgICAgIC8vICAgICB9ZWxzZXsNCiAgICAgICAgLy8gICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbDQogICAgICAgIC8vICAgICAgICAgICAgICB7DQogICAgICAgIC8vICAgICAgICAgICAgICAgICBfaWQgOiAiNWM5ODc5Nzk4Nzk3IiwNCiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGRhdGUgOiAiMjAxOS0wMy0yMVQwNzowODo0NSw3ODlaIiwNCiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWEiLA0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICIzNDUiLA0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgaXNBZG1pbjogZmFsc2UsDQogICAgICAgIC8vICAgICAgICAgICAgICAgICBpc0ZyZWV6ZSA6IGZhbHNlLA0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgX3YgOiAiMCIsDQogICAgICAgIC8vICAgICAgICAgICAgICAgICBlbWFpbCA644CAIjEyM0BxcS5jb20iDQogICAgICAgIC8vICAgICAgICAgICAgIH0sDQogICAgICAgIC8vICAgICAgICAgICAgIHsNCiAgICAgICAgLy8gICAgICAgICAgICAgICAgIF9pZCA6ICI1Yzk4Nzk3OTg3OTgiLA0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgZGF0ZSA6ICIyMDE5LTAzLTIxVDA3OjA4OjQ1LDc4OVoiLA0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhIiwNCiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiMzQ1IiwNCiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlzQWRtaW46IHRydWUsDQogICAgICAgIC8vICAgICAgICAgICAgICAgICBpc0ZyZWV6ZSA6IGZhbHNlLA0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgX3YgOiAiMCIsDQogICAgICAgIC8vICAgICAgICAgICAgICAgICBlbWFpbCA644CAIjEyM0BxcS5jb20iDQogICAgICAgIC8vICAgICAgICAgICAgIH0NCiAgICAgICAgLy8gICAgICAgICAgXQ0KICAgICAgICAvLyAgICAgfQ0KICAgICAgICAvLyB9KS5jYXRjaCgoZXJyKT0+ew0KICAgICAgICAvLyAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgLy8gfSkNCiAgICB9LA0KICAgIGNvbXB1dGVkIDogew0KICAgICAgICBub3dUYWJsZURhdGEoKXsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhYmxlRGF0YS5zbGljZSggKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGFnZVNpemUsdGhpcy5jdXJyZW50UGFnZSp0aGlzLnBhZ2VTaXplKSB8fCBbXTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kcyA6IHsNCiAgICAgICAgIGhhbmRsZVRvRnJlZXplKGluZGV4LHJvdyl7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyggaW5kZXgsIHJvdyk7DQogICAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoJy9hcGkyL2FkbWluL3VwZGF0ZUZyZWV6ZScsew0KICAgICAgICAgICAgICAgIGVtYWlsIDogcm93LmVtYWlsLA0KICAgICAgICAgICAgICAgIGlzRnJlZXplIDogIXJvdy5pc0ZyZWV6ZQ0KICAgICAgICAgICAgfSkudGhlbigocmVzKT0+ew0KICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSByZXMuZGF0YS5zdGF0dXM7DQogICAgICAgICAgICAgICAgaWYoc3RhdHVzID09PSAwKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYWxlcnQoJ+WGu+e7k+aTjeS9nOW3suaIkOWKnycsICfkv6Hmga8nLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogYWN0aW9uID0+IHsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGFbaW5kZXhdLmlzRnJlZXplID0gIXJvdy5pc0ZyZWV6ZTsgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRhbGVydCgn5Ya757uT5pON5L2c5aSx6LSlJywgJ+S/oeaBrycsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJyAgDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICB9LA0KICAgICAgICAgaGFuZGxlVG9EZWxldGUoaW5kZXgscm93KXsNCiAgICAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoJ2FwaTIvYWRtaW4vZGVsZXRlVXNlcicsew0KICAgICAgICAgICAgICAgIGVtYWlsIDogcm93LmVtYWlsICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICB9KS50aGVuKChyZXMpPT57DQogICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSByZXMuZGF0YS5zdGF0dXM7DQogICAgICAgICAgICAgICAgIGlmKHN0YXR1cyA9PT0gMCl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGFsZXJ0KCfliKDpmaTmk43kvZzlt7LmiJDlip8nLCfkv6Hmga8nLHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0IDogJ+ehruWumicsDQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA6IGFjdGlvbiA9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLnNwbGljZShpbmRleCwxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGFsZXJ0KCfliKDpmaTmk43kvZzlpLHotKUnLCfkv6Hmga8nLHsNCiAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dCA6ICfnoa7lrponDQogICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICB9KQ0KICAgICAgICAgfQ0KICAgIH0gIA0KfQ0K"},{"version":3,"sources":["users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"users.vue","sourceRoot":"src/views/Admin","sourcesContent":["<template>\r\n    <div>\r\n        <el-table :data=\"nowTableData\"  border  style=\"width: 100%\">\r\n            <el-table-column prop=\"userHead\" label=\"用户头像\">\r\n                <template slot-scope=\"scope\">\r\n                    <img :src=\"scope.row.userHead\" alt=\"\">\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"date\" label=\"注册日期\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"username\" label=\"用户姓名\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"email\" label=\"用户邮箱\">\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\">\r\n                <template  slot-scope=\"scope\">\r\n                    <el-button size=\"small\" @click=\"handleToFreeze(scope.$index, scope.row)\">{{ scope.row.isFreeze ? '已冻结' : '未冻结' }}</el-button>\r\n                    <el-button size=\"small\" @click=\"handleToDelete(scope.$index, scope.row)\" type=\"danger\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination class=\"page\" background  layout=\"prev, pager, next\" :current-page.sync=\"currentPage\" :page-size=\"pageSize\"  :total=\"tableData.length\">\r\n        </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name :'users',\r\n    data(){\r\n        return {\r\n            tableData : [],\r\n            currentPage : 2,\r\n            pageSize : 2\r\n\r\n        }\r\n    },\r\n    mounted(){\r\n        this.tableData = [\r\n                     {\r\n                        _id : \"5c9879798797\",\r\n                        date : \"2019-03-21T07:08:45,789Z\",\r\n                        username: \"aa\",\r\n                        password: \"345\",\r\n                        isAdmin: false,\r\n                        isFreeze : false,\r\n                        _v : \"0\",\r\n                        email :　\"123@qq.com\",\r\n                        userHead : 'localhost:3000/uploads/potter.ico'\r\n                    },\r\n                    {\r\n                        _id : \"5c9879798798\",\r\n                        date : \"2019-03-21T07:08:45,789Z\",\r\n                        username: \"a3\",\r\n                        password: \"345\",\r\n                        isAdmin: true,\r\n                        isFreeze : false,\r\n                        _v : \"0\",\r\n                        email :　\"123@qq.com\"\r\n                    },\r\n                    {\r\n                        _id : \"5c9879798799\",\r\n                        date : \"2019-03-21T07:08:45,789Z\",\r\n                        username: \"a\",\r\n                        password: \"345\",\r\n                        isAdmin: false,\r\n                        isFreeze : true,\r\n                        _v : \"0\",\r\n                        email :　\"123@qq.com\"\r\n                    },\r\n                    {\r\n                        _id : \"5c9879798800\",\r\n                        date : \"2019-03-21T07:08:45,789Z\",\r\n                        username: \"a25\",\r\n                        password: \"345\",\r\n                        isAdmin: false,\r\n                        isFreeze : false,\r\n                        _v : \"0\",\r\n                        email :　\"123@qq.com\"\r\n                    }\r\n                 ]\r\n        // this.axios.get('/api2/admin/userList').then((res)=>{\r\n        //     console.log(res);\r\n        //     var status = res.data.status;\r\n        //     if(status === 0){\r\n        //         this.tableData = res.data.data.usersList;\r\n\r\n        //     }else{\r\n        //          this.tableData = [\r\n        //              {\r\n        //                 _id : \"5c9879798797\",\r\n        //                 date : \"2019-03-21T07:08:45,789Z\",\r\n        //                 username: \"aa\",\r\n        //                 password: \"345\",\r\n        //                 isAdmin: false,\r\n        //                 isFreeze : false,\r\n        //                 _v : \"0\",\r\n        //                 email :　\"123@qq.com\"\r\n        //             },\r\n        //             {\r\n        //                 _id : \"5c9879798798\",\r\n        //                 date : \"2019-03-21T07:08:45,789Z\",\r\n        //                 username: \"a\",\r\n        //                 password: \"345\",\r\n        //                 isAdmin: true,\r\n        //                 isFreeze : false,\r\n        //                 _v : \"0\",\r\n        //                 email :　\"123@qq.com\"\r\n        //             }\r\n        //          ]\r\n        //     }\r\n        // }).catch((err)=>{\r\n        //     console.log(err);\r\n        // })\r\n    },\r\n    computed : {\r\n        nowTableData(){\r\n            return this.tableData.slice( (this.currentPage - 1) * this.pageSize,this.currentPage*this.pageSize) || [];\r\n        }\r\n    },\r\n    methods : {\r\n         handleToFreeze(index,row){\r\n            // console.log( index, row);\r\n            this.axios.post('/api2/admin/updateFreeze',{\r\n                email : row.email,\r\n                isFreeze : !row.isFreeze\r\n            }).then((res)=>{\r\n                var status = res.data.status;\r\n                if(status === 0){\r\n                    this.$alert('冻结操作已成功', '信息', {\r\n                        confirmButtonText: '确定',\r\n                        callback: action => { \r\n                            this.tableData[index].isFreeze = !row.isFreeze;                          \r\n                        }\r\n                    });\r\n\r\n                }\r\n                else{\r\n                    this.$alert('冻结操作失败', '信息', {\r\n                        confirmButtonText: '确定'  \r\n                    });\r\n\r\n                }\r\n            });\r\n         },\r\n         handleToDelete(index,row){\r\n             this.axios.post('api2/admin/deleteUser',{\r\n                email : row.email                 \r\n             }).then((res)=>{\r\n                 var status = res.data.status;\r\n                 if(status === 0){\r\n                    this.$alert('删除操作已成功','信息',{\r\n                        confirmButtonText : '确定',\r\n                        callback : action =>{\r\n                        this.tableData.splice(index,1);\r\n                        }\r\n                    });\r\n                 }\r\n                 else{\r\n                     this.$alert('删除操作失败','信息',{\r\n                         confirmButtonText : '确定'\r\n                     })\r\n                 }\r\n\r\n             })\r\n         }\r\n    }  \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page{ margin-top:20px;}\r\n</style>\r\n"]}]}