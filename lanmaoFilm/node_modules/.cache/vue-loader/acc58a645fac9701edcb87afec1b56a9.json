{"remainingRequest":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\vuepro\\miaomiao\\src\\components\\Search\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue\\vuepro\\miaomiao\\src\\components\\Search\\index.vue","mtime":1577862465201},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\vuepro\\miaomiao\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogJ1NlYXJjaCcsICANCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBtZXNzYWdlIDogJycsDQogICAgICAgICAgICBtb3ZpZXNMaXN0IDogW10NCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kcyA6IHsNCiAgICAgICAgY2FuY2VsUmVxdWVzdCgpew0KICAgICAgICAgICAgaWYodHlwZW9mIHRoaXMuc291cmNlID09PSAnZnVuY3Rpb24nKXsNCiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZSgn57uI5q2i6K+35rGCJykNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgfSwNCiAgICB3YXRjaCA6IHsNCiAgICAgICAgbWVzc2FnZSA6IGZ1bmN0aW9uKG5ld1ZhbCl7DQogICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7DQogICAgICAgICAgICB2YXIgY2l0eUlkID0gdGhpcy4kc3RvcmUuc3RhdGUuY2l0eS5pZDsNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVxdWVzdCgpOw0KICAgICAgICAgICAgdGhpcy5heGlvcy5nZXQoJy9hcGkvc2VhcmNoTGlzdD9jaXR5SWQ9JytjaXR5SWQrJyZrdz0nKyBuZXdWYWwsew0KICAgICAgICAgICAgICAgIGNhbmNlbFRva2VuIDogbmV3IHRoaXMuYXhpb3MuQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykgew0KICAgICAgICAgICAgICAgICAgICB0aGF0LnNvdXJjZSA9IGM7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0pLnRoZW4oKHJlcyk9PnsNCiAgICAgICAgICAgICAgICB2YXIgbXNnID0gcmVzLmRhdGE7DQogICAgICAgICAgICAgICAgdmFyIG1vdmllcyA9IHJlcy5kYXRhLmRhdGEubW92aWVzOw0KICAgICAgICAgICAgICAgIGlmKG1zZyAmJiBtb3ZpZXMpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmllc0xpc3QgPSByZXMuZGF0YS5kYXRhLm1vdmllcy5saXN0Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICAgIGlmKHRoaXMuYXhpb3MuaXNDYW5jZWwoZXJyKSl7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0IGNhbmNlbGVkJywgZXJyLm1lc3NhZ2UpOyAvL+ivt+axguWmguaenOiiq+WPlua2iO+8jOi/memHjOaYr+i/lOWbnuWPlua2iOeahG1lc3NhZ2UNCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgLy9oYW5kbGUgZXJyb3INCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfQ0KDQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/components/Search","sourcesContent":["<template>\r\n <div class=\"search_body\">\r\n     <div class=\"search_input\">\r\n         <div class=\"search_input_wrapper\">\r\n             <i class=\"iconfont iconsousuo\"></i>\r\n             <input type=\"text\" name=\"\" id=\"\" v-model=\"message\">         \r\n         </div>\r\n     </div>\r\n     <div class=\"search_result\">\r\n         <h3>电影/电视剧/综艺</h3>\r\n         <ul>\r\n             <!-- <li>\r\n                 <div class=\"img\"><img src=\"/images/movie_1.jpg\" alt=\"\"></div>\r\n                 <div class=\"info\">\r\n                     <p><span>无名</span><span>8.5</span></p>\r\n                     <p>A Cool Fish</p>\r\n                     <p>剧情，喜剧，犯罪</p>\r\n                     <p>2018-11-16</p>\r\n                 </div>\r\n             </li> -->\r\n             <li v-for=\"item in moviesList\" :key=\"item.id\">\r\n                 <div class=\"img\"><img :src=\" item.img | setWH('128.180') \" ></div>\r\n                 <div class=\"info\">\r\n                     <p><span>{{ item.nm }}</span><span>{{ item.sc }}</span></p>\r\n                     <p>{{ item.enm }}</p>\r\n                     <p>{{ item.cat }}</p>\r\n                     <p>{{ item.rt }}</p>\r\n                 </div>\r\n             </li>\r\n         </ul>\r\n     </div>\r\n </div>\r\n  \r\n\r\n  \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'Search',  \r\n    data(){\r\n        return {\r\n            message : '',\r\n            moviesList : []\r\n        }\r\n    },\r\n    methods : {\r\n        cancelRequest(){\r\n            if(typeof this.source === 'function'){\r\n                this.source('终止请求')\r\n            }\r\n        }\r\n\r\n    },\r\n    watch : {\r\n        message : function(newVal){\r\n            var that = this;\r\n            var cityId = this.$store.state.city.id;\r\n            this.cancelRequest();\r\n            this.axios.get('/api/searchList?cityId='+cityId+'&kw='+ newVal,{\r\n                cancelToken : new this.axios.CancelToken(function executor(c) {\r\n                    that.source = c;\r\n                })\r\n            }).then((res)=>{\r\n                var msg = res.data;\r\n                var movies = res.data.data.movies;\r\n                if(msg && movies){\r\n                    this.moviesList = res.data.data.movies.list;\r\n                }\r\n\r\n            }).catch((err) => {\r\n                if(this.axios.isCancel(err)){\r\n                    console.log('Request canceled', err.message); //请求如果被取消，这里是返回取消的message\r\n                }else{\r\n                    //handle error\r\n                    console.log(err);\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#content .search_body{ flex:1; overflow: auto;}\r\n.search_body .search_input{ padding: 8px 10px; background-color: #f5f5f5; border-bottom: 1px solid #e5e5e5;}\r\n.search_body .search_input_wrapper{ padding: 0 10px; border: 1px solid #e6e6e6; border-radius: 5px; background-color: #fff; display: flex;}\r\n.search_body .search_input_wrapper i{font-size: 16px;padding: 4px 0;}\r\n.search_body .search_input_wrapper input{ border: none; font-size: 13px; color: #333; padding: 4px 0;outline: none; margin-left:3%;}\r\n.search_body .search_result h3{ font-size:15px; color:#999; padding: 9px 15px; border-bottom: 1px solid #e6e6e6;}\r\n.search_body .search_result li{ border-bottom:1px #c9c9c9 dashed; padding: 10px 15px; box-sizing: border-box; display: flex;}\r\n.search_body .search_result .img{ width:60px; float:left;}\r\n.search_body .search_result .img img{ width: 100%;}\r\n.search_body .search_result .info{ float:left; margin-left: 15px; flex:1;}\r\n.search_body .search_result .info p{ height: 22px; display: flex; line-height: 22px; font-size:12px;}\r\n.search_body .search_result .info p:nth-of-type(1) span:nth-of-type(1){ font-size: 18px; flex:1; }\r\n.search_body .search_result .info p:nth-of-type(1) span:nth-of-type(2){ font-size: 16px; color:#fc7103;}\r\n</style>\r\n"]}]}